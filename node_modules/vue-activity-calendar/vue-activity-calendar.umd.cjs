(function(p,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(p=typeof globalThis<"u"?globalThis:p||self,t(p["vue-activity-calendar"]={},p.Vue))})(this,function(p,t){"use strict";const _={class:"activityCalendar"},E={class:"left"},v={class:"right"},b=["onClick"],S={class:"levelFlagContent"},L=t.defineComponent({__name:"ActivityCalendar",props:["data","endDate","width","height","cellLength","cellInterval","cellBorderRadius","header","backgroundColor","colors","weekDayFlagText","levelFlagText","fontSize","fontColor","showHeader","showWeekDayFlag","showLevelFlag","levelMapper","clickEvent"],setup(k){const l=k;var w=t.computed(()=>l);t.watch(w,(n,o)=>{x()},{deep:!0});var f=[];const e=t.reactive({data:[],beginDate:"",endDate:"",width:35,height:7,cellLength:16,cellInterval:6,cellBorderRadius:3,header:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],headerLength:[],showHeader:!0,backgroundColor:"#ffffff",colors:["#f5f5f5","#ebfaff","#e5f9ff","#c7f1ff","#86e0fe","#3ecefe"],showWeekDayFlag:!0,weekDayFlagText:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekDayFlagLength:[],levels:6,levelMapper:function(o){return o==0?0:o<=1?1:o<=3?2:o<=6?3:o<=9?4:5},showLevelFlag:!0,levelFlagText:["\u5C11","\u591A"],fontSize:12,fontColor:"#080808",clickEvent:function(o){}}),y=t.reactive({header(n){return`
            left: ${n.length}px;
            font-size: ${e.fontSize}px; 
            color: ${e.fontColor};
        `},weekDay(n){return`
            top: ${n.length-8}px;
            font-size: ${e.fontSize-2}px;
            color: ${e.fontColor};

        `},content(){return`
            grid-template-columns: repeat(${e.width+1},${e.cellLength+e.cellInterval/2}px);  
            grid-template-rows: repeat(${e.height} ,${e.cellLength+e.cellInterval/2}px);
            background-color: ${e.backgroundColor};
        `},item(n){return`
            width: ${e.cellLength}px;
            height: config.cellLength px; 
            background-color: ${e==null?void 0:e.colors[e.levelMapper?e.levelMapper(n.count):0]};
            border-radius: ${e.cellBorderRadius}px;
            visibility: ${n.index<0?"hidden;":""};
        `},levelFlag(){return`
            grid-template-columns: repeat(${e.colors.length},${e.cellLength+e.cellInterval/2}px);
            grid-template-rows: repeat(1,${e.cellLength+e.cellInterval/2}px);
            background-color: ${e.backgroundColor};
        `},levelFlagItem(n){return`
            width: ${e.cellLength}px; 
            background-color:  ${e.colors[n]}; 
            border-radius: ${e.cellBorderRadius}px;
            font-size: ${e.fontSize}px;
        `}});function B(){let n=[0,31,28,31,30,31,30,31,31,30,31,30,31],o=e.width*e.height;if(!e.endDate)return;let r=e.endDate.split("-"),g=Number(r[0])-0,i=Number(r[1])-0,a=Number(r[2])-0,c=g,h=i,s=a;if(o<=a)s=1;else for(o-=a,h=(h-1+11)%12+1,s=1;o>0;){c%4==0&&c%100!=0||c%400==0?n[2]=29:n[2]=28;for(let u=h;u>0;u--)if(n[u]<=o)o-=n[u],h=(h-1+11)%12+1;else{s=n[u]-o,o=0;break}o>0&&(c-=1)}e.beginDate=c+"-"+(h<10?"0"+h:h)+"-"+(s<10?"0"+s:s)}function z(){if(!f)return;f.sort((d,m)=>d.date>m.date?1:d.date<m.date?-1:0);let n=[0,31,28,31,30,31,30,31,31,30,31,30,31],o=e.width*e.height,r=0;if(!e.beginDate)return;let g=e.beginDate.split("-"),i=Number(g[0])-0,a=Number(g[1])-0,c=Number(g[2])-0;(i%4==0&&i%100!=0||i%400==0)&&(n[2]=29),c++,r++,c>n[a]&&(c=1,a++),a>12&&(a=1,i++,i%4==0&&i%100!=0||i%400==0?n[2]=29:n[2]=28);let h=[],s=0;for(let d=0;d<o;d++){let m=i+"-"+(a<10?"0"+a:a)+"-"+(c<10?"0"+c:c),F={index:d,count:0,date:m};if(s<f.length){for(;s<f.length&&f[s].date<m;)s++;s<f.length&&f[s].date==m&&(F.count=f[s].count,s++)}h.push(F),c+=1,r++,c>n[a]&&(c=1,a+=1,a>12&&(a=1,i+=1,i%4==0&&i%100!=0||i%400==0?n[2]=29:n[2]=28),e.headerLength&&e.headerLength.push({length:(e.cellLength+e.cellInterval/2)*(r/e.height),text:e.header[a-1]}))}let u=new Date(i+"-"+a+"-"+(c-1)).getDay();for(let d=0;d<u;d++)h.unshift({index:d-u,date:"",count:0});if(e.data=h,e.showWeekDayFlag&&e.weekDayFlagText){e.weekDayFlagText.length>7&&(e.weekDayFlagText=e.weekDayFlagText.slice(0,7));for(let d=0;d<e.height;d++)d%2==0&&e.weekDayFlagLength.push({length:e.fontSize*4/2+20+e.cellInterval+d*(e.cellLength+e.cellInterval/2),text:e.weekDayFlagText[d%7]})}}function x(){if(l.endDate)e.endDate=l.endDate;else{let n=new Date;e.endDate=n.getFullYear()+"-"+(n.getMonth()+1<10?"0"+(n.getMonth()+1):n.getMonth()+1)+"-"+(n.getDate()+1<10?"0"+n.getDate():n.getDate())}l.data&&(f=l.data),l.height&&(e.height=l.height),l.width&&(e.width=l.width),l.cellLength&&(e.cellLength=l.cellLength),l.cellInterval&&(e.cellInterval=l.cellInterval),l.cellBorderRadius&&(e.cellBorderRadius=l.cellBorderRadius),l.header&&(e.header=l.header),l.showHeader&&(e.showHeader=l.showHeader),l.backgroundColor&&(e.backgroundColor=l.backgroundColor),l.colors&&(e.colors=l.colors),typeof l.showWeekDayFlag=="boolean"&&(e.showWeekDayFlag=l.showWeekDayFlag),l.weekDayFlagText&&(e.weekDayFlagText=l.weekDayFlagText),l.levelMapper&&(e.levelMapper=l.levelMapper),typeof l.showLevelFlag=="boolean"&&(e.showLevelFlag=l.showLevelFlag),l.levelFlagText&&(e.levelFlagText=l.levelFlagText),l.fontSize&&(e.fontSize=l.fontSize),l.fontColor&&(e.fontColor=l.fontColor),l.clickEvent&&(e.clickEvent=l.clickEvent),B(),z()}return t.onMounted(()=>{t.nextTick(()=>{x()})}),(n,o)=>(t.openBlock(),t.createElementBlock("div",_,[t.withDirectives(t.createElementVNode("div",E,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.weekDayFlagLength,(r,g)=>(t.openBlock(),t.createElementBlock("div",{key:g,style:t.normalizeStyle(y.weekDay(r))},t.toDisplayString(r.text),5))),128))],512),[[t.vShow,e.showWeekDayFlag]]),t.createElementVNode("div",v,[t.withDirectives(t.createElementVNode("div",{class:"header",style:t.normalizeStyle(`height: ${e.fontSize}px;`)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.headerLength,(r,g)=>(t.openBlock(),t.createElementBlock("div",{key:g,style:t.normalizeStyle(y.header(r))},t.toDisplayString(r.text),5))),128))],4),[[t.vShow,e.showHeader]]),t.createElementVNode("div",{class:"content",style:t.normalizeStyle(y.content())},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.data,(r,g)=>(t.openBlock(),t.createElementBlock("div",{class:"item",key:g,style:t.normalizeStyle(y.item(r)),onClick:i=>e.clickEvent?e.clickEvent(r):null},null,12,b))),128))],4),t.withDirectives(t.createElementVNode("div",S,[t.createElementVNode("div",{style:t.normalizeStyle(`font-size: ${e.fontSize}px; color: ${e.fontColor}`)},t.toDisplayString(e.levelFlagText?e.levelFlagText[0]:""),5),t.createElementVNode("div",{class:"levelFlag",style:t.normalizeStyle(y.levelFlag())},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.colors,(r,g)=>(t.openBlock(),t.createElementBlock("div",{key:g,style:t.normalizeStyle(y.levelFlagItem(g))},null,4))),128))],4),t.createElementVNode("div",{style:t.normalizeStyle(`font-size: ${e.fontSize}px; color: ${e.fontColor}`)},t.toDisplayString(e.levelFlagText?e.levelFlagText[1]:""),5)],512),[[t.vShow,e.showLevelFlag]])])]))}}),T="",D=((k,l)=>{const w=k.__vccOpts||k;for(const[f,e]of l)w[f]=e;return w})(L,[["__scopeId","data-v-de96ee93"]]),C=[D],$=function(k){C.forEach(l=>{k.component(l.__name,l)})};p.ActivityCalendar=D,p.default=$,Object.defineProperties(p,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
